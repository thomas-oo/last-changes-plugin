def execute(){
  node() {
    def STOP_ON_ERROR = '';
    def mvnHome
    def javaHome
    def failed = false;
    try{
      stage('Preparation') { // for display purposes
        // Get the Maven tool.
        // ** NOTE: This 'M3' Maven tool must be configured
        // **       in the global configuration.
        checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[url: 'https://github.com/thomas-oo/last-changes-plugin']]])

      }
      stage('Last Changes'){
        echo 'In last changes'
        step([$class: 'MultiLastChangesPublisher', format: 'LINE', matchWordsThreshold: '0.25', matching: 'NONE', matchingMaxComparisons: '1000', showFiles: true, synchronisedScroll: true, endRevision: ''])
      }
    }catch(Exception e){
      failed = true
      echo 'Build failed'
    }finally{
      if(!failed){
        stage('Last Changes'){
          echo 'In last changes'
          step([$class: 'MultiLastChangesPublisher', format: 'LINE', matchWordsThreshold: '0.25', matching: 'NONE', matchingMaxComparisons: '1000', showFiles: true, synchronisedScroll: true, endRevision: ''])
        }
      }
      echo 'In finally block'
    }
  }

}
return this